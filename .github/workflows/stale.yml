name: ğŸ—‚ï¸ è¿‡æœŸ Issue è‡ªåŠ¨æ¸…ç†

on:
  schedule:
    - cron: "0 2 * * *"   # æ¯å¤©å‡Œæ™¨ 2 ç‚¹è¿è¡Œ
  workflow_dispatch:

jobs:
  stale:
    name: æ ‡è®° & å…³é—­è¿‡æœŸ Issue
    runs-on: ubuntu-latest
    permissions:
      issues: write

    steps:
      - uses: actions/stale@v9
        with:
          repo-token: ${{ secrets.GITHUB_TOKEN }}

          # ---- Issue è¿‡æœŸé…ç½® ----
          days-before-issue-stale: 30
          days-before-issue-close: 7
          stale-issue-label: "stale"
          stale-issue-message: |
            ğŸ‘‹ **æ­¤ Issue å·²è¶…è¿‡ 30 å¤©æ²¡æœ‰æ´»åŠ¨ã€‚**

            å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œè¯·ï¼š
            - å›å¤æ­¤è¯„è®ºä¿æŒ Issue æ´»è·ƒ
            - æä¾›æ›´å¤šå¤ç°ä¿¡æ¯æˆ–é”™è¯¯æ—¥å¿—

            å¦åˆ™ï¼Œæ­¤ Issue å°†åœ¨ **7 å¤©åè‡ªåŠ¨å…³é—­**ã€‚

            æ„Ÿè°¢ä½ çš„å‚ä¸ï¼â€” **AME**
          close-issue-message: |
            ç”±äºé•¿æ—¶é—´æ— æ´»åŠ¨ï¼Œæ­¤ Issue å·²è‡ªåŠ¨å…³é—­ã€‚
            å¦‚é—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œæ¬¢è¿é‡æ–°å¼€å¯æˆ–[æäº¤æ–° Issue](https://github.com/${{ github.repository }}/issues/new/choose)ã€‚

            â€” **AME è‡ªåŠ¨åŒ–ç³»ç»Ÿ**

          # ---- è±å…æ ‡ç­¾ï¼ˆè¿™äº›æ ‡ç­¾çš„ Issue ä¸ä¼šè¢«å…³é—­ï¼‰----
          exempt-issue-labels: "pinned,security,in-progress,help wanted,confirmed,priority: critical,priority: high"

          # ---- PR è¿‡æœŸé…ç½®ï¼ˆå…³é—­æç½®çš„ PRï¼‰----
          days-before-pr-stale: 45
          days-before-pr-close: 14
          stale-pr-label: "stale"
          stale-pr-message: |
            ğŸ‘‹ **æ­¤ PR å·²è¶…è¿‡ 45 å¤©æ²¡æœ‰æ´»åŠ¨ã€‚**

            å¦‚éœ€ç»§ç»­æ¨è¿›ï¼Œè¯·æ›´æ–°ä»£ç æˆ–å›å¤æ­¤è¯„è®ºã€‚
            å¦åˆ™å°†åœ¨ **14 å¤©åè‡ªåŠ¨å…³é—­**ã€‚

            â€” **AME**
          close-pr-message: |
            ç”±äºé•¿æ—¶é—´æ— æ´»åŠ¨ï¼Œæ­¤ PR å·²è‡ªåŠ¨å…³é—­ã€‚å¦‚éœ€ç»§ç»­ï¼Œæ¬¢è¿é‡æ–°å¼€å¯ã€‚

          exempt-pr-labels: "in-progress,pinned"

          # æ¯æ¬¡æœ€å¤šå¤„ç† 30 æ¡ï¼Œé¿å… API é™æµ
          operations-per-run: 30
