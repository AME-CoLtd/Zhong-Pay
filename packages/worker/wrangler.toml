name = "zhong-pay-worker"
main = "src/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# =============================
# 环境变量（敏感值在 wrangler secret put 设置）
# =============================
[vars]
NODE_ENV = "production"
PLATFORM_NAME = "众支付"

# =============================
# D1 数据库绑定（可选，替代外部 MySQL）
# =============================
# [[d1_databases]]
# binding = "DB"
# database_name = "zhong-pay"
# database_id = "your-d1-database-id"

# =============================
# KV 存储（用于 Session / 限流）
# =============================
[[kv_namespaces]]
binding = "KV"
id = "your-kv-namespace-id"
preview_id = "your-kv-preview-namespace-id"

# =============================
# 路由规则
# =============================
# [routes]
# pattern = "api.yourdomain.com/*"
# zone_name = "yourdomain.com"

# =============================
# 多环境配置
# =============================
[env.staging]
name = "zhong-pay-worker-staging"
vars = { NODE_ENV = "staging" }

[env.production]
name = "zhong-pay-worker"
vars = { NODE_ENV = "production" }
